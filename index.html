<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>UW Partner Earnings Tool</title>
<script src="https://cdn.tailwindcss.com"></script>
<script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<style>
  @keyframes slideDown { 0%{opacity:0;transform:scale(0.95)} 100%{opacity:1;transform:scale(1)} }
  @keyframes confetti { 0%{transform:translateY(0) rotate(0deg);opacity:1} 100%{transform:translateY(100vh) rotate(360deg);opacity:0} }
  @keyframes bounceOnce { 0%,100%{transform:translateY(0)} 25%{transform:translateY(-20px)} 50%{transform:translateY(0)} 75%{transform:translateY(-10px)} }
  @keyframes ctaSlideIn { 0%{opacity:0;transform:translateY(20px)} 100%{opacity:1;transform:translateY(0)} }
  @keyframes pulseTwice { 0%,100%{transform:scale(1)} 25%,75%{transform:scale(1.08)} 50%{transform:scale(1)} }
  @keyframes fadeInOut { 0%{opacity:0;transform:translateY(-8px)} 20%,80%{opacity:1;transform:translateY(0)} 100%{opacity:0;transform:translateY(-8px)} }
  .animate-slideDown { animation: slideDown 0.2s ease-out forwards; }
  .animate-confetti { animation: confetti 3s ease-in forwards; }
  .animate-bounceOnce { animation: bounceOnce 0.6s ease-in-out; }
  .cta-slide-in { animation: ctaSlideIn 0.4s ease-out forwards; }
  .pulse-twice { animation: pulseTwice 1.2s ease-in-out; animation-iteration-count: 1; }
  .fade-in-out { animation: fadeInOut 4s ease-in-out; }
  * { box-sizing: border-box; }
  @media (orientation: landscape) and (max-height: 500px) {
    .accordion-list { display: grid !important; grid-template-columns: 1fr 1fr !important; gap: 0.4rem !important; align-items: start !important; }
    .accordion-list > div { overflow: visible !important; }
  }
  .profile-bubble-wrap {
    position: fixed; top: 0.75rem; right: 0.75rem; z-index: 100;
    display: flex; flex-direction: column; align-items: flex-end; gap: 0.3rem;
  }
  .profile-photo-btn {
    width: 3.25rem; height: 3.25rem; border-radius: 50%; overflow: hidden;
    border: 2.5px solid #ffffff;
    box-shadow: 0 4px 16px rgba(124,58,237,0.35), 0 2px 6px rgba(0,0,0,0.18);
    cursor: pointer; background: linear-gradient(135deg,#7c3aed,#db2777);
    display: flex; align-items: center; justify-content: center;
    transition: transform 0.18s; flex-shrink: 0; align-self: flex-end;
  }
  .profile-photo-btn:hover { transform: scale(1.07); }
  .profile-photo-btn img { width: 100%; height: 100%; object-fit: cover; }
  .profile-photo-btn .initials { color: white; font-weight: 800; font-size: 1.1rem; letter-spacing: -0.02em; }
  .bubble-name-wrap {
    text-align: right;
    transition: opacity 0.35s ease, max-height 0.35s ease, margin 0.35s ease;
    max-height: 3rem; overflow: hidden; margin-bottom: 0;
  }
  .bubble-name-wrap.hidden { opacity: 0; max-height: 0; pointer-events: none; margin-bottom: -0.3rem; }
  .bubble-name-primary { font-size: 0.78rem; font-weight: 700; color: #1f2937; line-height: 1.3; }
  .bubble-name-secondary { font-size: 0.68rem; color: #6b7280; line-height: 1.3; }
  .fab-actions {
    display: flex; flex-direction: column; align-items: flex-end; gap: 0.4rem;
    max-height: 0; opacity: 0; overflow: hidden; transform: translateY(-12px);
    transition: max-height 0.35s ease, opacity 0.3s ease, transform 0.3s ease;
  }
  .fab-actions.open { max-height: 16rem; opacity: 1; transform: translateY(0); }
  .fab-action-btn {
    display: flex; align-items: center; gap: 0.45rem; padding: 0.45rem 0.75rem;
    border-radius: 2rem; border: none; cursor: pointer; font-size: 0.8rem; font-weight: 700;
    white-space: nowrap; background: white; color: #1f2937; text-decoration: none; transition: transform 0.15s;
  }
  .fab-action-btn:hover { transform: scale(1.04); }
  .fab-btn-jumpin { box-shadow: 3px 3px 10px rgba(109,40,217,0.3); }
  .fab-btn-bookin { box-shadow: 3px 3px 10px rgba(168,85,247,0.3); }
  .fab-btn-sayhi  { box-shadow: 3px 3px 10px rgba(219,39,119,0.3); }
  .fab-icon { font-size: 1rem; line-height: 1; }
  .sayhi-icons-row {
    display: flex; justify-content: flex-end; gap: 0.4rem;
    max-height: 0; opacity: 0; overflow: hidden; transform: translateY(-6px);
    transition: max-height 0.3s ease, opacity 0.25s ease, transform 0.25s ease;
  }
  .sayhi-icons-row.open { max-height: 3rem; opacity: 1; transform: translateY(0); }
  .fab-icon-circle {
    width: 2.2rem; height: 2.2rem; border-radius: 50%; background: white;
    border: 1.5px solid #e5e7eb; box-shadow: 2px 2px 8px rgba(219,39,119,0.2);
    display: flex; align-items: center; justify-content: center;
    cursor: pointer; flex-shrink: 0; text-decoration: none; transition: transform 0.15s, background 0.15s;
  }
  .fab-icon-circle:hover { transform: scale(1.1); background: #fdf2f8; }
  .fab-icon-circle svg { width: 1rem; height: 1rem; }

  /* â”€â”€ Left slide panel â”€â”€ */
  .contact-panel-overlay {
    position: fixed; inset: 0; background: rgba(0,0,0,0.35);
    opacity: 0; pointer-events: none;
    transition: opacity 0.35s ease;
    z-index: 150;
  }
  .contact-panel-overlay.visible { opacity: 1; pointer-events: auto; }
  .contact-panel {
    position: fixed; top: 0; left: 0; height: 100%;
    width: min(22rem, 88vw);
    background: white;
    box-shadow: 6px 0 32px rgba(0,0,0,0.22);
    transform: translateX(-100%);
    transition: transform 0.38s cubic-bezier(0.4,0,0.2,1);
    z-index: 151;
    display: flex; flex-direction: column;
    overflow-y: auto;
  }
  .contact-panel.open { transform: translateX(0); }

  /* â”€â”€ Left pull tab â”€â”€ */
  .left-pull-tab {
    position: fixed;
    top: 50%;
    left: 0;
    transform: translateY(-50%);
    z-index: 152;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    gap: 0.2rem;
    background: linear-gradient(135deg,#7c3aed,#db2777);
    color: white;
    border-radius: 0 0.6rem 0.6rem 0;
    padding: 0.7rem 0.45rem;
    cursor: pointer;
    box-shadow: 3px 0 14px rgba(124,58,237,0.35);
    transition: transform 0.38s cubic-bezier(0.4,0,0.2,1), box-shadow 0.2s, opacity 0.3s, background 0.3s;
    user-select: none;
  }
  .left-pull-tab:hover { box-shadow: 4px 0 18px rgba(124,58,237,0.5); }
  .left-pull-tab.panel-open {
    transform: translateY(-50%) translateX(min(22rem, 88vw));
  }
  .left-pull-tab.muted {
    background: linear-gradient(135deg,#9ca3af,#6b7280);
    opacity: 0.7;
  }
  .pull-tab-emoji { font-size: 1.15rem; line-height: 1; margin-bottom: 0.3rem; }
  .pull-tab-label {
    writing-mode: vertical-rl; text-orientation: mixed;
    font-size: 0.6rem; font-weight: 800; letter-spacing: 0.06em;
    text-transform: uppercase; line-height: 1.2;
  }

  /* Tooltip for Next Steps */
  .next-steps-tooltip {
    position: fixed;
    left: 3.5rem;
    top: 50%;
    transform: translateY(-50%);
    z-index: 153;
    background: white;
    border: 2px solid #7c3aed;
    border-radius: 0.5rem;
    padding: 0.6rem 0.8rem;
    box-shadow: 0 4px 16px rgba(124,58,237,0.3);
    max-width: 16rem;
    pointer-events: none;
  }
  .next-steps-tooltip::before {
    content: '';
    position: absolute;
    left: -8px;
    top: 50%;
    transform: translateY(-50%);
    width: 0;
    height: 0;
    border-top: 6px solid transparent;
    border-bottom: 6px solid transparent;
    border-right: 8px solid #7c3aed;
  }

  /* Toast notification */
  .toast-notification {
    position: fixed;
    top: 5rem;
    left: 50%;
    transform: translateX(-50%);
    z-index: 160;
    background: white;
    border: 2px solid #7c3aed;
    border-radius: 0.5rem;
    padding: 0.75rem 1.25rem;
    box-shadow: 0 4px 16px rgba(124,58,237,0.3);
    max-width: 90vw;
  }
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useRef, useCallback, useEffect } = React;

const CONTACT = {
  displayName: 'Adrian',
  fullName: 'Adrian Croft',
  title: 'UW Partner',
  photoUrl: 'https://raw.githubusercontent.com/aqcroft/UW_PET_GH_v2/main/Adrian_Croft.jpg',
  whatsappNumber: '447787400800',
  whatsappMessage: "Hi Adrian, I've just used your earnings tool and I'd like to know more",
  email: 'adrian.croft@uw.partners',
  emailSubject: 'Your UW earnings tool',
  emailBody: "Hi Adrian, I've just used your earnings tool and I'd like to know more",
  phone: '+447787400800',
  calendarUrl: 'https://tidycal.com/aqcroft/uwcost',
  registrationUrl: 'https://uw.partners/adrian.croft/partner/join',
};

const whatsappUrl = () => `https://wa.me/${CONTACT.whatsappNumber}?text=${encodeURIComponent(CONTACT.whatsappMessage)}`;
const emailUrl   = () => `mailto:${CONTACT.email}?subject=${encodeURIComponent(CONTACT.emailSubject)}&body=${encodeURIComponent(CONTACT.emailBody)}`;
const phoneUrl   = () => `tel:${CONTACT.phone}`;

const WaIcon = () => (
  <svg viewBox="0 0 24 24" fill="#374151" style={{width:'1.15rem',height:'1.15rem'}}>
    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
  </svg>
);
const EmailIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="#374151" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" style={{width:'1.15rem',height:'1.15rem'}}>
    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
    <polyline points="22,6 12,13 2,6"/>
  </svg>
);
const PhoneIcon = () => (
  <svg viewBox="0 0 24 24" fill="none" stroke="#374151" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" style={{width:'1.15rem',height:'1.15rem'}}>
    <path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07A19.5 19.5 0 013.07 9.81a19.79 19.79 0 01-3.07-8.69A2 2 0 012.18 1h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L6.91 8.09a16 16 0 006 6l.56-.56a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0122 16.92z"/>
  </svg>
);

/* â”€â”€ Contact Panel â€” slides in from the left â”€â”€ */
const ContactPanel = ({ grandTotal, isOpen, onClose, hasCompletedFastStarter }) => {
  const initials = CONTACT.fullName.split(' ').map(n=>n[0]).join('').slice(0,2);
  
  // Determine tab state
  const tabEmoji = isOpen ? 'âœ•' : (hasCompletedFastStarter ? 'ğŸ§­' : 'ğŸ‘‹');
  const tabLabel = isOpen ? 'Close' : (hasCompletedFastStarter ? 'Next Steps' : 'Get in touch');
  const tabMuted = !hasCompletedFastStarter && !isOpen;
  
  return (
    <>
      <div className={`contact-panel-overlay${isOpen?' visible':''}`} onClick={onClose} />
      <div className={`left-pull-tab${isOpen?' panel-open':''}${tabMuted?' muted':''}`} onClick={isOpen ? onClose : onClose}>
        <span className="pull-tab-emoji">{tabEmoji}</span>
        <span className="pull-tab-label">{tabLabel}</span>
      </div>
      <div className={`contact-panel${isOpen?' open':''}`}>
        <div style={{background:'linear-gradient(135deg,rgba(124,58,237,0.75),rgba(219,39,119,0.75))',padding:'1.6rem 1.25rem 1.3rem',textAlign:'center',position:'relative',flexShrink:0}}>
          <button onClick={onClose} style={{position:'absolute',top:'0.75rem',right:'0.75rem',width:'1.75rem',height:'1.75rem',borderRadius:'50%',background:'rgba(255,255,255,0.15)',border:'none',cursor:'pointer',color:'rgba(255,255,255,0.8)',fontSize:'0.9rem',display:'flex',alignItems:'center',justifyContent:'center'}}>âœ•</button>
          <img src={CONTACT.photoUrl} alt={CONTACT.fullName}
            style={{width:'4rem',height:'4rem',borderRadius:'50%',border:'2.5px solid rgba(255,255,255,0.7)',objectFit:'cover',margin:'0 auto 0.5rem',display:'block'}}
            onError={e=>{e.currentTarget.style.display='none';e.currentTarget.nextSibling.style.display='flex';}} />
          <div style={{width:'4rem',height:'4rem',borderRadius:'50%',border:'2.5px solid rgba(255,255,255,0.7)',background:'rgba(124,58,237,0.6)',margin:'0 auto 0.5rem',display:'none',alignItems:'center',justifyContent:'center',fontWeight:'800',fontSize:'1.2rem',color:'white'}}>{initials}</div>
          <p style={{color:'white',fontWeight:'700',fontSize:'0.85rem',margin:'0 0 0.75rem',lineHeight:1.3}}>
            {CONTACT.fullName} Â· {CONTACT.title}
          </p>
          <span style={{color:'rgba(255,255,255,0.9)',fontWeight:'700',fontSize:'0.92rem',display:'block',marginBottom:'0.2rem'}}>You've just built a</span>
          <span style={{display:'block',fontWeight:'800',fontSize:'0.95rem',marginBottom:'0.45rem',lineHeight:'1.3'}}>
            <span style={{color:'#fde68a'}}>Â£{grandTotal.toLocaleString()} </span>
            <span style={{color:'rgba(255,255,255,0.9)'}}>example.</span>
          </span>
          <span style={{color:'rgba(255,255,255,0.85)',fontSize:'0.82rem',lineHeight:'1.4',display:'block'}}>What would you like to explore next?</span>
        </div>
        <div style={{padding:'1rem',display:'flex',flexDirection:'column',gap:'0.5rem',flex:1}}>
          <a href={CONTACT.registrationUrl} target="_blank" rel="noopener noreferrer"
            style={{minHeight:'5.5rem',borderRadius:'0.75rem',display:'flex',alignItems:'center',gap:'0.7rem',padding:'0.8rem 0.9rem',background:'white',boxShadow:'3px 3px 10px rgba(109,40,217,0.3)',textDecoration:'none',transition:'transform 0.15s'}}
            onMouseEnter={e=>e.currentTarget.style.transform='scale(1.02)'}
            onMouseLeave={e=>e.currentTarget.style.transform='scale(1)'}
            onClick={onClose}>
            <span style={{fontSize:'1.3rem',lineHeight:1,flexShrink:0}}>ğŸ”¥</span>
            <span style={{flex:1}}>
              <span style={{fontWeight:'700',fontSize:'0.9rem',display:'block',color:'#1f2937'}}>Jump in</span>
              <span style={{fontSize:'0.73rem',marginTop:'0.2rem',display:'block',fontStyle:'italic',lineHeight:'1.35',color:'#6b7280'}}>\"I'm ready to get registered and start earning\"</span>
            </span>
          </a>
          <a href={CONTACT.calendarUrl} target="_blank" rel="noopener noreferrer"
            style={{minHeight:'5.5rem',borderRadius:'0.75rem',display:'flex',alignItems:'center',gap:'0.7rem',padding:'0.8rem 0.9rem',background:'white',boxShadow:'3px 3px 10px rgba(168,85,247,0.3)',textDecoration:'none',transition:'transform 0.15s'}}
            onMouseEnter={e=>e.currentTarget.style.transform='scale(1.02)'}
            onMouseLeave={e=>e.currentTarget.style.transform='scale(1)'}
            onClick={onClose}>
            <span style={{fontSize:'1.3rem',lineHeight:1,flexShrink:0}}>ğŸ—“ï¸</span>
            <span style={{flex:1}}>
              <span style={{fontWeight:'700',fontSize:'0.9rem',display:'block',color:'#1f2937'}}>Book in</span>
              <span style={{fontSize:'0.73rem',marginTop:'0.2rem',display:'block',fontStyle:'italic',lineHeight:'1.35',color:'#6b7280'}}>\"I've got questions and I'd love a chat\"</span>
            </span>
          </a>
          {/* Say hi â€” all three contact buttons permanently visible */}
          <div style={{borderRadius:'0.75rem',background:'white',boxShadow:'3px 3px 10px rgba(219,39,119,0.3)',padding:'0.8rem 0.9rem 0.85rem'}}>
            <div style={{display:'flex',alignItems:'center',gap:'0.7rem',marginBottom:'0.65rem'}}>
              <span style={{fontSize:'1.3rem',lineHeight:1,flexShrink:0}}>ğŸ‘‹</span>
              <span style={{flex:1}}>
                <span style={{fontWeight:'700',fontSize:'0.9rem',display:'block',color:'#1f2937'}}>Say hi</span>
                <span style={{fontSize:'0.73rem',marginTop:'0.2rem',display:'block',fontStyle:'italic',lineHeight:'1.35',color:'#6b7280'}}>\"I'd love help with my next step\"</span>
              </span>
            </div>
            <div style={{display:'flex',gap:'0.6rem',justifyContent:'center'}}>
              {[
                {href:whatsappUrl(),icon:<WaIcon/>,title:'WhatsApp'},
                {href:emailUrl(),icon:<EmailIcon/>,title:'Email'},
                {href:phoneUrl(),icon:<PhoneIcon/>,title:'Call'},
              ].map(btn=>(
                <a key={btn.title} href={btn.href} target="_blank" rel="noopener noreferrer" title={btn.title}
                  style={{width:'2.5rem',height:'2.5rem',borderRadius:'50%',background:'#f3f4f6',border:'1.5px solid #e5e7eb',display:'flex',alignItems:'center',justifyContent:'center',cursor:'pointer',transition:'background 0.15s,transform 0.15s',flexShrink:0,textDecoration:'none'}}
                  onMouseEnter={e=>{e.currentTarget.style.background='#e5e7eb';e.currentTarget.style.transform='scale(1.1)';}}
                  onMouseLeave={e=>{e.currentTarget.style.background='#f3f4f6';e.currentTarget.style.transform='scale(1)';}}
                  onClick={onClose}>{btn.icon}</a>
              ))}
            </div>
          </div>
        </div>
      </div>
    </>
  );
};

/* â”€â”€ Profile Bubble (top-right) â€” unchanged â”€â”€ */
const ProfileBubble = () => {
  const [open, setOpen] = useState(false);
  const [sayhiOpen, setSayhiOpen] = useState(false);
  const toggle = () => { const n=!open; setOpen(n); if(!n) setSayhiOpen(false); };
  return (
    <div className="profile-bubble-wrap">
      <button className="profile-photo-btn" onClick={toggle} aria-label={open?'Close menu':'Open menu'}>
        <img src={CONTACT.photoUrl} alt={CONTACT.fullName} onError={e=>{e.currentTarget.style.display='none';e.currentTarget.nextSibling.style.display='flex';}} />
        <span className="initials" style={{display:'none'}}>{CONTACT.fullName.split(' ').map(n=>n[0]).join('').slice(0,2)}</span>
      </button>
      <div className={`bubble-name-wrap${open?' hidden':''}`}>
        <div className="bubble-name-primary">{CONTACT.fullName}</div>
        <div className="bubble-name-secondary">{CONTACT.title}</div>
      </div>
      <div className={`fab-actions${open?' open':''}`}>
        <a href={CONTACT.registrationUrl} target="_blank" rel="noopener noreferrer" className="fab-action-btn fab-btn-jumpin" onClick={()=>setOpen(false)}><span className="fab-icon">ğŸ”¥</span><span>Jump in</span></a>
        <a href={CONTACT.calendarUrl} target="_blank" rel="noopener noreferrer" className="fab-action-btn fab-btn-bookin" onClick={()=>setOpen(false)}><span className="fab-icon">ğŸ—“ï¸</span><span>Book in</span></a>
        <div style={{display:'flex',flexDirection:'column',alignItems:'flex-end',gap:'0.3rem'}}>
          <button className="fab-action-btn fab-btn-sayhi" onClick={e=>{e.stopPropagation();setSayhiOpen(s=>!s);}}><span className="fab-icon">ğŸ‘‹</span><span>Say hi</span></button>
          <div className={`sayhi-icons-row${sayhiOpen?' open':''}`}>
            <a href={whatsappUrl()} target="_blank" rel="noopener noreferrer" className="fab-icon-circle"><svg viewBox="0 0 24 24" fill="#374151"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg></a>
            <a href={emailUrl()} className="fab-icon-circle"><svg viewBox="0 0 24 24" fill="none" stroke="#374151" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></a>
            <a href={phoneUrl()} className="fab-icon-circle"><svg viewBox="0 0 24 24" fill="none" stroke="#374151" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07A19.5 19.5 0 013.07 9.81a19.79 19.79 0 01-3.07-8.69A2 2 0 012.18 1h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L6.91 8.09a16 16 0 006 6l.56-.56a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0122 16.92z"/></svg></a>
          </div>
        </div>
      </div>
    </div>
  );
};

const PostFastStartCTA = () => {
  const actions = [
    {emoji:'ğŸ”¥',label:'Jump in',sub:'Become a partner today',href:CONTACT.registrationUrl,bg:'linear-gradient(135deg,#7c3aed,#9333ea)',color:'white'},
    {emoji:'ğŸ—“ï¸',label:'Book in',sub:'Grab 20 mins with me',href:CONTACT.calendarUrl,bg:'linear-gradient(135deg,#db2777,#e11d48)',color:'white'},
    {emoji:'ğŸ’¬',label:'Say hi',sub:'Drop me a WhatsApp',href:whatsappUrl(),bg:'linear-gradient(135deg,#16a34a,#15803d)',color:'white'},
  ];
  return (
    <div className="cta-slide-in" style={{marginTop:'1.25rem',borderRadius:'1rem',overflow:'hidden',boxShadow:'0 8px 30px rgba(124,58,237,0.2)',border:'2px solid #c4b5fd'}}>
      <div style={{background:'linear-gradient(135deg,#7c3aed,#db2777)',padding:'1.25rem 1.25rem 1rem',textAlign:'center'}}>
        <div style={{fontSize:'2rem',marginBottom:'0.35rem'}}>ğŸš€</div>
        <h3 style={{color:'white',fontWeight:'800',fontSize:'1.15rem',margin:'0 0 0.3rem'}}>Curious what this looks like for you?</h3>
        <p style={{color:'#fbcfe8',fontSize:'0.8rem',margin:0,lineHeight:'1.5'}}>You've just seen what the first 30 days could look like.<br/>Now imagine doing this alongside {CONTACT.displayName}.</p>
      </div>
      <div style={{background:'#faf9ff',padding:'1rem'}}>
        <p style={{textAlign:'center',fontSize:'0.82rem',color:'#6b7280',margin:'0 0 0.85rem',fontStyle:'italic'}}>No pressure. Pick whichever feels right.</p>
        <div style={{display:'flex',flexDirection:'column',gap:'0.5rem'}}>
          {actions.map(a=>(
            <a key={a.label} href={a.href} target="_blank" rel="noopener noreferrer"
              style={{display:'flex',alignItems:'center',gap:'0.75rem',padding:'0.75rem 1rem',borderRadius:'0.6rem',background:a.bg,color:a.color,textDecoration:'none',fontWeight:'700',fontSize:'0.9rem',boxShadow:'0 2px 8px rgba(0,0,0,0.12)',transition:'transform 0.15s,box-shadow 0.15s'}}
              onMouseEnter={e=>{e.currentTarget.style.transform='scale(1.02)';e.currentTarget.style.boxShadow='0 4px 16px rgba(0,0,0,0.18)';}}
              onMouseLeave={e=>{e.currentTarget.style.transform='scale(1)';e.currentTarget.style.boxShadow='0 2px 8px rgba(0,0,0,0.12)';}}> 
              <span style={{fontSize:'1.3rem',lineHeight:1,flexShrink:0}}>{a.emoji}</span>
              <div><div>{a.label}</div><div style={{fontWeight:'400',fontSize:'0.74rem',opacity:0.85,marginTop:'0.1rem'}}>{a.sub}</div></div>
              <span style={{marginLeft:'auto',opacity:0.7,fontSize:'1rem'}}>â€º</span>
            </a>
          ))}
        </div>
        <p style={{textAlign:'center',fontSize:'0.72rem',color:'#9ca3af',marginTop:'0.85rem',marginBottom:0,fontStyle:'italic'}}>{CONTACT.displayName} Â· UW Partner</p>
      </div>
    </div>
  );
};

const defaultIconStyle={width:'1rem',height:'1rem',flexShrink:0};
const TrendingUp=({style})=>(<svg style={style||defaultIconStyle} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/></svg>);
const RefreshCw=({style})=>(<svg style={style||defaultIconStyle} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg>);
const Lock=({style})=>(<svg style={style||defaultIconStyle} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/></svg>);
const Info=({style})=>(<svg style={style||defaultIconStyle} fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" strokeWidth={2}/><path strokeLinecap="round" strokeWidth={2} d="M12 16v-4M12 8h.01"/></svg>);
const X=({style})=>(<svg style={style||defaultIconStyle} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12"/></svg>);
const ChevronDown=({style})=>(<svg style={style||defaultIconStyle} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7"/></svg>);
const ChevronUp=({style})=>(<svg style={style||defaultIconStyle} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 15l7-7 7 7"/></svg>);
const SM={width:'1rem',height:'1rem',flexShrink:0};
const MD={width:'1.25rem',height:'1.25rem',flexShrink:0};
const XS={width:'0.875rem',height:'0.875rem',flexShrink:0};
const RcwIcon=({style})=>(<svg style={style||SM} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg>);

const box={background:'#f5f3ff',borderRadius:'0.5rem',padding:'0.75rem',marginBottom:'0.5rem'};
const closing={fontStyle:'italic',fontWeight:'700',color:'#111827',margin:0};
const unlockStyle={fontStyle:'italic',fontSize:'0.72rem',color:'#7c3aed',margin:'0.2rem 0 0.35rem 0',lineHeight:'1.3'};
const scbSummary=(isOpen)=>(<span>Upfront payment when we support a Partner to introduce a homeowner.{' '}<span style={{fontStyle:'italic',fontSize:'0.72rem',color:'#7c3aed',opacity:isOpen?1:0,transition:'opacity 0.15s',userSelect:isOpen?'auto':'none'}}>ğŸ”“ Unlocks at 6 Personal Customers.</span></span>);
const mbSummary=(isOpen)=>(<span>Up to Â£400 when a Partner we introduce reaches QD*.<br/><span style={{fontStyle:'italic',fontSize:'0.72rem',color:'#7c3aed',opacity:isOpen?1:0,transition:'opacity 0.15s',userSelect:isOpen?'auto':'none'}}>ğŸ”“ Unlocks at 3 Personal Customers.</span></span>);

const sections=[
  {id:'cb',icon:<span style={{fontSize:'1.1rem'}}>ğŸ’·</span>,title:'Customer Bonus',summary:'Upfront payment when we introduce a homeowner customer.',
    detail:(<div style={{fontSize:'0.875rem',color:'#374151'}}><p style={{marginBottom:'0.5rem'}}>Paid when services go live:</p><div style={{...box,display:'grid',gridTemplateColumns:'1fr 1fr',gap:'0.25rem'}}><span>1ï¸âƒ£ service â€” Â£50</span><span>3ï¸âƒ£ services â€” Â£250</span><span>2ï¸âƒ£ services â€” Â£100</span><span>4ï¸âƒ£ services â€” Â£300</span></div><p style={closing}>ğŸ’¡ The more customers introduced, the more upfront earnings grow.</p></div>)},
  {id:'hab',icon:<span style={{fontSize:'1.1rem'}}>ğŸ”¥</span>,title:'High Activity Bonus',summary:'Extra reward for building momentum with multiple 3+ service homeowners in one calendar month.',
    detail:(<div style={{fontSize:'0.875rem',color:'#374151'}}><p style={{marginBottom:'0.5rem'}}>Counted in one calendar month, on top of Customer Bonus:</p><div style={box}><div>2ï¸âƒ£ or more homeowners â€” Â£50 each</div><div>4ï¸âƒ£ or more homeowners â€” Â£100 each</div></div><p style={closing}>ğŸ’¡ That's up to Â£400 per homeowner combined.</p></div>)},
  {id:'ri',icon:<RcwIcon style={{...SM,color:'#2563eb'}}/>,title:'Recurring (Residual) Income',summary:\"Ongoing monthly income from our personal customers and our team\'s customers.\",
    detail:(<div style={{fontSize:'0.875rem',color:'#374151'}}><p style={{marginBottom:'0.5rem'}}>A recurring profit share of customers' bills which increases as customers add more services.</p><div style={{...box,marginBottom:'0.5rem'}}><p style={unlockStyle}>ğŸ”“ Unlocks at 3 Personal Customers</p><p style={{margin:'0 0 0.35rem 0',display:'flex',alignItems:'center',gap:'0.3rem'}}><RcwIcon style={{...XS,color:'#2563eb'}}/><span>ğŸ‘¥</span><strong>Team (Group) Customers</strong><span style={{fontWeight:'400',fontStyle:'italic',color:'#6b7280',fontSize:'0.8rem'}}>â€” pence per service, typically</span></p><div style={{marginBottom:'0.5rem'}}>â€¢ 30â€“50p /month per customer</div><div style={{borderTop:'1px solid #c4b5fd',paddingTop:'0.4rem'}}><p style={unlockStyle}>ğŸ”“ Unlocks at 6 Personal Customers</p><p style={{margin:'0 0 0.35rem 0',display:'flex',alignItems:'center',gap:'0.3rem'}}><RcwIcon style={{...XS,color:'#2563eb'}}/><span>ğŸ‘¤</span><strong>Personal Customers</strong><span style={{fontWeight:'400',fontStyle:'italic',color:'#6b7280',fontSize:'0.8rem'}}>â€” % of bill, typically</span></p><div>â€¢ Tenant â€” Â£2â€“Â£3 /month <span style={{color:'#6b7280',fontSize:'0.72rem'}}>(after first bill paid)</span></div><div>â€¢ Homeowner â€” Â£3â€“Â£5 /month <span style={{color:'#6b7280',fontSize:'0.72rem'}}>(after a set period)</span></div></div></div><p style={closing}>ğŸ’¡ Recurring income builds steadily as customers and teams grow.</p></div>)},
  {id:'scb',icon:<span style={{fontSize:'1.1rem'}}>ğŸ¤</span>,title:'Supporting Customer Bonus â€ ',summary:scbSummary,
    detail:(<div style={{fontSize:'0.875rem',color:'#374151'}}><div style={{...box,fontSize:'0.8rem',marginBottom:'0.5rem'}}><div style={{marginBottom:'0.3rem'}}>â±ï¸ <strong>First 45 days</strong> â€” Partner keeps full Customer Bonus, we receive 50%.</div><div style={{marginBottom:'0.4rem'}}>â¡ï¸ <strong>After 45 days</strong> â€” Customer Bonus shared 50:50.</div><div style={{borderTop:'1px solid #c4b5fd',paddingTop:'0.4rem',display:'grid',gridTemplateColumns:'1fr 1fr',gap:'0.25rem'}}><span>1ï¸âƒ£ service â€” Â£25</span><span>3ï¸âƒ£ services â€” Â£125</span><span>2ï¸âƒ£ services â€” Â£50</span><span>4ï¸âƒ£ services â€” Â£150</span></div></div><p style={closing}>ğŸ’¡ Extra income from helping Partners introduce homeowners.</p></div>)},
  {id:'mb',icon:<span style={{fontSize:'1.1rem'}}>ğŸ“</span>,title:'Mentor Bonus â€ ',summary:mbSummary,
    detail:(<div style={{fontSize:'0.875rem',color:'#374151'}}><p style={{marginBottom:'0.5rem',fontWeight:'600'}}>QD* = 6 Personal Customers + 1 Partner introduced</p><div style={box}><div style={{display:'flex',alignItems:'center',gap:'0.4rem'}}><span>ğŸ“</span><span>Mentor Bonus â€” Â£100</span></div><div style={{display:'flex',alignItems:'center',gap:'0.4rem',marginTop:'0.25rem'}}><TrendingUp style={{...XS,color:'#374151'}}/><span>30 days Mentor Fast Starter Bonus â€” Â£300</span></div><div style={{borderTop:'1px solid #c4b5fd',marginTop:'0.5rem',paddingTop:'0.5rem',paddingLeft:'1.5rem'}}>Total â€” Â£400 per Partner</div></div><p style={closing}>ğŸ’¡ Rewards for helping Partners build confidence, customers and income.</p></div>)},
];

const HowPaidPopup=({onClose})=>{
  const [openId,setOpenId]=useState(null);
  const headerRefs=useRef({});
  const toggle=useCallback((id)=>{const opening=openId!==id;setOpenId(opening?id:null);if(opening&&headerRefs.current[id])headerRefs.current[id].scrollIntoView({behavior:'instant',block:'start'});},[openId]);
  return(
    <div style={{position:'fixed',inset:0,background:'rgba(0,0,0,0.5)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:200,padding:'0.75rem'}} onClick={onClose}>
      <div className="popup-inner" style={{background:'white',borderRadius:'0.75rem',boxShadow:'0 20px 50px rgba(0,0,0,0.3)',maxWidth:'28rem',width:'100%',display:'flex',flexDirection:'column',height:'85vh'}} onClick={e=>e.stopPropagation()}>
        <div style={{padding:'1rem 1rem 0.6rem',borderBottom:'1px solid #f3f4f6',display:'flex',alignItems:'flex-start',justifyContent:'space-between',flexShrink:0}}>
          <div><h3 style={{fontSize:'1.05rem',fontWeight:'700',color:'#111827',margin:0}}>How UW Partner Earnings Build</h3><p style={{fontSize:'0.75rem',color:'#6b7280',marginTop:'0.2rem',marginBottom:0}}>Upfront earnings help you start â€” recurring earnings help you grow.</p></div>
          <button onClick={onClose} style={{marginLeft:'0.75rem',width:'1.75rem',height:'1.75rem',borderRadius:'50%',background:'#f3f4f6',border:'none',cursor:'pointer',display:'flex',alignItems:'center',justifyContent:'center',flexShrink:0}}><X style={{...XS,color:'#4b5563'}}/></button>
        </div>
        <div className="accordion-list" style={{overflowY:'auto',flex:1,padding:'0.6rem',display:'flex',flexDirection:'column',gap:'0.4rem'}}>
          {sections.map(s=>{const isOpen=openId===s.id;return(
            <div key={s.id} style={{border:'1px solid #e5e7eb',borderRadius:'0.6rem',overflow:'hidden',background:'white'}}>
              <button ref={el=>headerRefs.current[s.id]=el} style={{width:'100%',display:'flex',alignItems:'center',gap:'0.6rem',padding:'0.6rem 0.75rem',textAlign:'left',background:'none',border:'none',cursor:'pointer'}} onClick={()=>toggle(s.id)}>
                <span style={{flexShrink:0,display:'flex',alignItems:'center'}}>{s.icon}</span>
                <div style={{flex:1,minWidth:0}}>
                  <p style={{fontWeight:'600',fontSize:'0.85rem',color:'#111827',margin:'0 0 0.1rem 0'}}>{s.title}</p>
                  <p style={{fontSize:'0.78rem',color:'#6b7280',margin:0,lineHeight:'1.4'}}>{typeof s.summary==='function'?s.summary(isOpen):s.summary}</p>
                </div>
                {isOpen?<ChevronUp style={{...SM,color:'#9ca3af'}}/>:<ChevronDown style={{...SM,color:'#9ca3af'}}/>}
              </button>
              {isOpen&&<div style={{padding:'0.25rem 0.75rem 0.75rem',borderTop:'1px solid #f3f4f6',background:'#faf9ff'}}>{s.detail}</div>}
            </div>
          );})}
          <p style={{fontSize:'0.7rem',color:'#9ca3af',textAlign:'center',margin:'0.25rem 0 0.1rem',fontStyle:'italic',lineHeight:'1.6'}}>ğŸ’¡ Complete a Fast Starter above to unlock a worked example of Supporting and Mentor bonuses.</p>
        </div>
      </div>
    </div>
  );
};

const UWTracker=()=>{
  const [showCelebration,setShowCelebration]=useState(false);
  const [showContactPanel,setShowContactPanel]=useState(false);
  const [showPostFSBCTA,setShowPostFSBCTA]=useState(false);
  const [selectedCircle,setSelectedCircle]=useState(null);
  const [showPartnerPrompt,setShowPartnerPrompt]=useState(false);
  const [showResetConfirm,setShowResetConfirm]=useState(false);
  const [showInfoPopup,setShowInfoPopup]=useState(false);
  const [cardFlipped,setCardFlipped]=useState(false);
  const [includeYou,setIncludeYou]=useState(true);
  const [showFirstCustomerToast,setShowFirstCustomerToast]=useState(false);
  const [showNextStepsTooltip,setShowNextStepsTooltip]=useState(false);
  const [hasShownTooltip,setHasShownTooltip]=useState(false);
  const [hasPulsedTab,setHasPulsedTab]=useState(false);
  const [hasShownFirstToast,setHasShownFirstToast]=useState(false);
  const previouslyQualified=useRef(false);
  const tabRef=useRef(null);
  const [customers,setCustomers]=useState([
    {type:'own',services:0,isPartner:false},
    {type:null,services:0,isPartner:false},
    {type:null,services:0,isPartner:false},
    {type:null,services:0,isPartner:false},
    {type:null,services:0,isPartner:false},
    {type:null,services:0,isPartner:false},
  ]);

  const calculateCB=(customer,index)=>{
    if(!includeYou&&index===0){if(customer.type==='homeowner'){if(customer.services===1)return 50;if(customer.services===2)return 100;if(customer.services===3)return 250;if(customer.services===4)return 300;}return 0;}
    if(customer.type==='own'||customer.type==='renting')return 0;
    if(customer.type==='homeowner'){if(customer.services===1)return 50;if(customer.services===2)return 100;if(customer.services===3)return 250;if(customer.services===4)return 300;}
    return 0;
  };

  const highActivityCustomers=customers.filter((c,i)=>includeYou?i>0&&c.type==='homeowner'&&(c.services===3||c.services===4):c.type==='homeowner'&&(c.services===3||c.services===4)).length;
  const habPerCustomer=highActivityCustomers>=4?100:highActivityCustomers>=2?50:0;
  const totalHAB=highActivityCustomers*habPerCustomer;
  const totalCB=customers.reduce((sum,c,i)=>sum+calculateCB(c,i),0);
  const hasPartner=customers.some((c,i)=>includeYou?i>0&&c.isPartner:c.isPartner);
  const allCirclesFilled=customers.every(c=>c.type!==null);
  const qualifiesForFastStarter=allCirclesFilled&&hasPartner;
  const fastStarterBonus=qualifiesForFastStarter?500:0;
  const grandTotal=totalCB+totalHAB+fastStarterBonus;
  const tenantCount=customers.filter((c,i)=>includeYou?i>0&&c.type==='renting':c.type==='renting').length;
  const residualIncome=tenantCount*2.5;
  const supportingBonus=Math.round(totalCB/2);
  const partnerTotalEarnings=supportingBonus+100+300;

  // Check if first customer is completed (for toast)
  const firstCustomerCompleted = customers.some((c, i) => {
    if (includeYou) return i > 0 && c.type !== null;
    return c.type !== null;
  });

  // Pulse tab twice when Fast Starter completes
  useEffect(() => {
    if (qualifiesForFastStarter && !hasPulsedTab && tabRef.current) {
      setHasPulsedTab(true);
      tabRef.current.classList.add('pulse-twice');
    }
  }, [qualifiesForFastStarter, hasPulsedTab]);

  // Show tooltip 10 seconds after Fast Starter completion (if panel not opened)
  useEffect(() => {
    if (qualifiesForFastStarter && !showContactPanel && !hasShownTooltip) {
      const timer = setTimeout(() => {
        setShowNextStepsTooltip(true);
        setHasShownTooltip(true);
        setTimeout(() => setShowNextStepsTooltip(false), 4000);
      }, 10000);
      return () => clearTimeout(timer);
    }
  }, [qualifiesForFastStarter, showContactPanel, hasShownTooltip]);

  // Show first customer toast
  useEffect(() => {
    if (firstCustomerCompleted && !hasShownFirstToast) {
      setShowFirstCustomerToast(true);
      setHasShownFirstToast(true);
      setTimeout(() => setShowFirstCustomerToast(false), 3000);
    }
  }, [firstCustomerCompleted, hasShownFirstToast]);

  const getCircleOpacity=(index)=>{if(index===0&&includeYou)return 1;if(!includeYou){for(let i=0;i<index;i++)if(customers[i].type===null)return 0.3;return 1;}for(let i=1;i<index;i++)if(customers[i].type===null)return 0.3;return 1;};
  const canSelectCircle=(index)=>{if(index===0&&includeYou)return false;if(!includeYou){if(allCirclesFilled)return true;for(let i=0;i<index;i++)if(customers[i].type===null)return false;return true;}if(allCirclesFilled)return true;for(let i=1;i<index;i++)if(customers[i].type===null)return false;return true;};

  const triggerCelebration=()=>{
    setShowCelebration(true);
    setTimeout(()=>{
      setShowCelebration(false);
      setShowPostFSBCTA(true);
    },3000);
  };

  const handlePartnerBadgeClick=(e,index)=>{e.stopPropagation();if((index===0&&includeYou)||customers[index].type===null)return;const wasQualified=qualifiesForFastStarter;const nc=[...customers];nc[index]={...nc[index],isPartner:!nc[index].isPartner};setCustomers(nc);const nowQualifies=nc.every(c=>c.type!==null)&&nc.some((c,i)=>includeYou?i>0&&c.isPartner:c.isPartner);if(!wasQualified&&nowQualifies&&!previouslyQualified.current){previouslyQualified.current=true;setTimeout(triggerCelebration,200);}if(!nowQualifies)previouslyQualified.current=false;setShowPartnerPrompt(false);};
  const handleCircleClick=(index)=>{if((index===0&&includeYou)||!canSelectCircle(index))return;setSelectedCircle(index);};
  const setCustomerType=(type,services)=>{if(selectedCircle===null)return;const wasQualified=qualifiesForFastStarter;const nc=[...customers];nc[selectedCircle]={type,services:services||0,isPartner:nc[selectedCircle].isPartner};setCustomers(nc);setSelectedCircle(null);const nowAllFilled=nc.every(c=>c.type!==null);const nowHasPartner=nc.some((c,i)=>includeYou?i>0&&c.isPartner:c.isPartner);const nowQualifies=nowAllFilled&&nowHasPartner;if(!wasQualified&&nowQualifies&&!previouslyQualified.current){previouslyQualified.current=true;setTimeout(triggerCelebration,200);}else if(nowAllFilled&&!nowHasPartner)setShowPartnerPrompt(true);if(!nowQualifies)previouslyQualified.current=false;};
  const removeCustomer=()=>{if(selectedCircle===null)return;const nc=[...customers];nc[selectedCircle]={type:null,services:0,isPartner:false};setCustomers(nc);setSelectedCircle(null);previouslyQualified.current=false;};
  const resetTracking=()=>{setCustomers([{type:includeYou?'own':null,services:0,isPartner:false},{type:null,services:0,isPartner:false},{type:null,services:0,isPartner:false},{type:null,services:0,isPartner:false},{type:null,services:0,isPartner:false},{type:null,services:0,isPartner:false}]);setSelectedCircle(null);setShowPartnerPrompt(false);setShowResetConfirm(false);setCardFlipped(false);setShowPostFSBCTA(false);previouslyQualified.current=false;setHasShownTooltip(false);setHasPulsedTab(false);setHasShownFirstToast(false);};
  const toggleIncludeYou=()=>{const niy=!includeYou;setIncludeYou(niy);const nc=[...customers];nc[0]={type:niy?'own':null,services:0,isPartner:false};setCustomers(nc);setSelectedCircle(null);previouslyQualified.current=false;};

  const ordinal=(n)=>n===1?'1st':n===2?'2nd':n===3?'3rd':`${n}th`;
  const circleColor=(c)=>{if(c.type===null)return{border:'#d1d5db',text:'#9ca3af',bg:'#f9fafb'};if(c.type==='own')return{border:'#9ca3af',text:'#374151',bg:'#f3f4f6'};if(c.type==='renting')return{border:'#2563eb',text:'#1d4ed8',bg:'#eff6ff'};return{border:'#7c3aed',text:'#6d28d9',bg:'#f5f3ff'};};
  const bannerCol=qualifiesForFastStarter?'#fbcfe8':'#9ca3af';

  return(
    <div style={{minHeight:'100vh',background:'linear-gradient(135deg,#fdf2f8,#f5f3ff)',padding:'1rem'}}>
      <ProfileBubble/>
      <ContactPanel grandTotal={grandTotal} isOpen={showContactPanel} onClose={()=>setShowContactPanel(s=>!s)} hasCompletedFastStarter={qualifiesForFastStarter}/>
      
      {/* Next Steps Tooltip */}
      {showNextStepsTooltip && (
        <div className="next-steps-tooltip fade-in-out">
          <div style={{display:'flex',alignItems:'center',gap:'0.4rem',fontSize:'0.82rem',fontWeight:'600',color:'#111827'}}>
            <span>ğŸ’¡</span>
            <span>You've built Â£{grandTotal.toLocaleString()}. Explore your next steps here.</span>
          </div>
        </div>
      )}

      {/* First Customer Toast */}
      {showFirstCustomerToast && (
        <div className="toast-notification fade-in-out">
          <div style={{display:'flex',alignItems:'center',gap:'0.5rem',fontSize:'0.875rem',fontWeight:'600',color:'#111827'}}>
            <span>ğŸ’¡</span>
            <span>Nice start â€” keep going to see how bonuses build.</span>
          </div>
        </div>
      )}

      {showCelebration&&(<div style={{position:'fixed',inset:0,pointerEvents:'none',zIndex:50}}>{[...Array(50)].map((_,i)=>(<div key={i} className="animate-confetti" style={{position:'absolute',left:`${Math.random()*100}%`,top:'-10%',animationDelay:`${Math.random()*0.5}s`,animationDuration:`${2+Math.random()}s`}}><div style={{color:'#facc15',fontSize:`${Math.random()*20+10}px`,transform:`rotate(${Math.random()*360}deg)`}}>âœ¨</div></div>))}</div>)}
      <div style={{maxWidth:'42rem',margin:'0 auto'}}>
        <div style={{marginBottom:'1.5rem'}}>
          <h1 style={{fontSize:'1.5rem',fontWeight:'700',color:'#1f2937',marginBottom:'0.5rem',textAlign:'center'}}>UW Partner Earnings Tool</h1>
          <div style={{display:'flex',alignItems:'center',justifyContent:'space-between',gap:'1rem'}}>
            <div style={{display:'flex',alignItems:'center',gap:'0.5rem'}}>
              <button onClick={toggleIncludeYou} style={{position:'relative',display:'inline-flex',height:'1.5rem',width:'2.75rem',alignItems:'center',borderRadius:'9999px',border:'none',cursor:'pointer',background:includeYou?'#22c55e':'#d1d5db',transition:'background 0.2s'}}>
                <span style={{display:'inline-block',height:'1rem',width:'1rem',transform:includeYou?'translateX(1.5rem)':'translateX(0.25rem)',borderRadius:'50%',background:'white',transition:'transform 0.2s',boxShadow:'0 1px 3px rgba(0,0,0,0.2)'}}></span>
              </button>
              <span style={{fontSize:'0.875rem',fontWeight:'600',color:'#374151'}}>You</span>
              <div style={{position:'relative',display:'inline-flex',alignItems:'center',marginLeft:'0.25rem'}}>
                <span style={{fontSize:'1rem',cursor:'help'}} title="Most Partners start by saving on their own household bills first. Toggle this off anytime.">ğŸ’¡</span>
              </div>
            </div>
            <p style={{fontSize:'0.875rem',color:'#6b7280',flex:1,textAlign:'center'}}>Explore what <strong>{includeYou?'five':'six'}</strong> customers could earn you in the first 30 days</p>
            <div style={{width:'5rem'}}></div>
          </div>
        </div>
        <div style={{background:'white',borderRadius:'1rem',boxShadow:'0 4px 16px rgba(0,0,0,0.08)',padding:'1.5rem'}}>
          <div style={{display:'grid',gridTemplateColumns:'repeat(3,1fr)',gap:'1rem',marginBottom:'1rem'}}>
            {customers.map((customer,index)=>{
              const col=circleColor(customer);const cb=calculateCB(customer,index);
              const showHAB=customer.type==='homeowner'&&(customer.services===3||customer.services===4)&&highActivityCustomers>=2;
              return(
                <div key={index} style={{display:'flex',flexDirection:'column',alignItems:'center',position:'relative'}}>
                  <div onClick={()=>handleCircleClick(index)} style={{width:'5rem',height:'5rem',borderRadius:'50%',border:`4px solid ${col.border}`,display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',fontSize:'1.125rem',fontWeight:'700',position:'relative',background:col.bg,color:col.text,cursor:canSelectCircle(index)?'pointer':'not-allowed',opacity:getCircleOpacity(index),transition:'transform 0.15s',boxSizing:'border-box'}}>
                    {(index===0&&includeYou)?<span style={{fontSize:'1rem',fontWeight:'700'}}>You</span>
                    :customer.type?(
                      <><span style={{fontSize:'0.875rem',fontWeight:'700'}}>Â£{cb.toLocaleString()}</span>
                      {showHAB&&<div style={{position:'absolute',top:'-0.25rem',right:'-0.25rem',padding:'0.125rem 0.25rem',background:'#f97316',color:'white',fontSize:'0.625rem',fontWeight:'700',borderRadius:'0.25rem',zIndex:10}}>+Â£{habPerCustomer}</div>}
                      <div onClick={(e)=>handlePartnerBadgeClick(e,index)} style={{position:'absolute',bottom:'-0.25rem',right:'-0.25rem',width:'1.5rem',height:'1.5rem',borderRadius:'50%',border:`2px solid ${customer.isPartner?'#ca8a04':'#9ca3af'}`,display:'flex',alignItems:'center',justifyContent:'center',zIndex:10,cursor:'pointer',background:customer.isPartner?'#facc15':'#e5e7eb',transition:'transform 0.15s'}}>
                        <span style={{fontSize:'0.625rem',fontWeight:'700',color:customer.isPartner?'#713f12':'#6b7280'}}>P</span>
                      </div></>
                    ):(
                      <><span style={{fontSize:'0.875rem'}}>{includeYou?ordinal(index):ordinal(index+1)}</span>
                      <div style={{position:'absolute',bottom:'-0.25rem',right:'-0.25rem',width:'1.5rem',height:'1.5rem',borderRadius:'50%',border:'2px solid #9ca3af',display:'flex',alignItems:'center',justifyContent:'center',zIndex:10,background:'#e5e7eb'}}>
                        <span style={{fontSize:'0.625rem',fontWeight:'700',color:'#6b7280'}}>P</span>
                      </div></>
                    )}
                  </div>
                </div>
              );
            })}
          </div>
          {showPartnerPrompt&&allCirclesFilled&&!hasPartner&&(
            <div style={{marginBottom:'1rem',padding:'1rem',background:'linear-gradient(to right,#facc15,#f59e0b)',borderRadius:'0.5rem',boxShadow:'0 2px 8px rgba(0,0,0,0.1)'}}>
              <div style={{display:'flex',alignItems:'center',justifyContent:'center',gap:'0.75rem',flexWrap:'wrap'}}>
                <span style={{fontSize:'0.875rem',fontWeight:'700',color:'#713f12'}}>Press above to upgrade one customer to Partner:</span>
                <div style={{display:'flex',alignItems:'center',gap:'0.5rem'}}>
                  <div style={{width:'1.5rem',height:'1.5rem',borderRadius:'50%',background:'#e5e7eb',border:'2px solid #9ca3af',display:'flex',alignItems:'center',justifyContent:'center'}}><span style={{fontSize:'0.625rem',fontWeight:'700',color:'#6b7280'}}>P</span></div>
                  <span style={{fontSize:'1.25rem'}}>â†’</span>
                  <div style={{width:'1.5rem',height:'1.5rem',borderRadius:'50%',background:'#facc15',border:'2px solid #ca8a04',display:'flex',alignItems:'center',justifyContent:'center'}}><span style={{fontSize:'0.625rem',fontWeight:'700',color:'#713f12'}}>P</span></div>
                </div>
              </div>
            </div>
          )}
          <div style={{display:'flex',flexDirection:'column',gap:'0.75rem'}}>
            <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'0.75rem 1rem',borderRadius:'0.5rem',border:`4px solid ${totalCB>0?'#7c3aed':'#d1d5db'}`,background:totalCB>0?'#f5f3ff':'#f9fafb'}}>
              <div style={{display:'flex',alignItems:'center',gap:'0.5rem'}}><span style={{fontSize:'1.25rem',filter:totalCB>0?'none':'grayscale(1)',opacity:totalCB>0?1:0.4}}>ğŸ’·</span><span style={{fontWeight:'600',color:totalCB>0?'#7c3aed':'#4b5563'}}>Customer Bonus:</span></div>
              <span style={{fontSize:'1.25rem',fontWeight:'700',color:totalCB>0?'#6d28d9':'#9ca3af'}}>Â£{totalCB.toLocaleString()}</span>
            </div>
            {highActivityCustomers>=2&&(
              <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'0.75rem 1rem',borderRadius:'0.5rem',border:'4px solid #f97316',background:'#fff7ed'}}>
                <div style={{display:'flex',alignItems:'center',gap:'0.5rem'}}><span style={{fontSize:'1.25rem'}}>ğŸ”¥</span><span style={{fontWeight:'600',color:'#ea580c'}}>High Activity Bonus:</span></div>
                <span style={{fontSize:'1.25rem',fontWeight:'700',color:'#ea580c'}}>Â£{totalHAB.toLocaleString()}</span>
              </div>
            )}
            <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'0.75rem 1rem',borderRadius:'0.5rem',border:`2px solid ${qualifiesForFastStarter?'#86efac':'#e5e7eb'}`,background:qualifiesForFastStarter?'#f0fdf4':'#f9fafb'}}>
              <div style={{display:'flex',alignItems:'center',gap:'0.5rem'}}><TrendingUp style={{...MD,color:qualifiesForFastStarter?'#16a34a':'#9ca3af'}}/><span style={{fontWeight:'600',color:qualifiesForFastStarter?'#16a34a':'#374151'}}>Fast Starter Bonus:</span></div>
              <span style={{fontSize:'1.25rem',fontWeight:'700',color:qualifiesForFastStarter?'#16a34a':'#9ca3af'}}>Â£{fastStarterBonus.toLocaleString()}</span>
            </div>
            <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'1rem',borderRadius:'0.5rem',boxShadow:'0 2px 8px rgba(0,0,0,0.15)',color:'white',position:'relative',overflow:'hidden'}}>
              <div style={{position:'absolute',inset:0,background:grandTotal>0?'linear-gradient(to right,#7c3aed,#db2777)':'#9ca3af'}}></div>
              <div style={{display:'flex',alignItems:'center',gap:'0.5rem',position:'relative',zIndex:1}}>
                <span style={{fontWeight:'700',fontSize:'1.125rem'}}>TOTAL EARNINGS:</span>
                <button onClick={(e)=>{e.stopPropagation();setShowInfoPopup(true);}} style={{width:'1.5rem',height:'1.5rem',borderRadius:'50%',background:'rgba(255,255,255,0.3)',border:'none',cursor:'pointer',display:'flex',alignItems:'center',justifyContent:'center',padding:0}}><Info style={{...XS,color:'white'}}/></button>
              </div>
              <span style={{fontSize:'1.5rem',fontWeight:'700',position:'relative',zIndex:1}}>Â£{grandTotal.toLocaleString()}</span>
            </div>
            {tenantCount>0&&(
              <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'0.75rem 1rem',borderRadius:'0.5rem',border:'4px solid #2563eb',background:'#eff6ff'}}>
                <div style={{display:'flex',alignItems:'center',gap:'0.5rem'}}><RefreshCw style={{...MD,color:'#2563eb'}}/><span style={{fontWeight:'600',color:'#374151'}}>Recurring Income:</span></div>
                <div style={{textAlign:'right'}}><span style={{fontSize:'1.25rem',fontWeight:'700',color:'#2563eb'}}>Â£{residualIncome.toFixed(2)}/m</span><span style={{display:'block',fontSize:'0.75rem',color:'#3b82f6'}}>(Â£{(residualIncome*12).toLocaleString()}/yr)</span></div>
              </div>
            )}
            <div onClick={()=>qualifiesForFastStarter&&setCardFlipped(!cardFlipped)} style={{borderRadius:'0.75rem',border:`2px solid ${qualifiesForFastStarter?'#a78bfa':'#e5e7eb'}`,overflow:'hidden',cursor:qualifiesForFastStarter?'pointer':'not-allowed'}}>
              {!cardFlipped?(
                <div style={{padding:'1rem',background:qualifiesForFastStarter?'linear-gradient(to right,#7c3aed,#db2777)':'#f3f4f6'}}>
                  <div style={{display:'flex',alignItems:'center',gap:'0.5rem',marginBottom:'0.75rem'}}>
                    {qualifiesForFastStarter?<span style={{fontSize:'1.125rem',lineHeight:1}}>ğŸ”“</span>:<Lock style={{...SM,color:'#9ca3af'}}/>}
                    <span style={{fontWeight:'700',fontSize:'1rem',color:qualifiesForFastStarter?'white':'#9ca3af'}}>New Revenue Streams Unlocked</span>
                  </div>
                  <div style={{fontSize:'0.875rem',color:bannerCol,display:'flex',flexDirection:'column',gap:'0.25rem'}}>
                    <div style={{display:'flex',alignItems:'center',gap:'0.5rem'}}><span style={{filter:qualifiesForFastStarter?'none':'grayscale(1)',opacity:qualifiesForFastStarter?1:0.5}}>ğŸ¤</span><span>Supporting Customer</span></div>
                    <div style={{display:'flex',alignItems:'center',gap:'0.5rem'}}><span style={{filter:qualifiesForFastStarter?'none':'grayscale(1)',opacity:qualifiesForFastStarter?1:0.5}}>ğŸ“</span><span>Mentor</span></div>
                    <div style={{display:'flex',alignItems:'center',gap:'0.5rem'}}><TrendingUp style={{...SM,color:bannerCol}}/><span>{'  '}Fast Starter Mentor</span></div>
                  </div>
                  {qualifiesForFastStarter&&<p style={{fontSize:'0.75rem',color:'#fbcfe8',fontStyle:'italic',textAlign:'center',marginTop:'0.75rem',marginBottom:0}}>Tap to see worked example</p>}
                </div>
              ):(
                <div style={{padding:'1rem',background:'linear-gradient(to right,#7c3aed,#db2777)'}}>
                  <p style={{color:'white',fontWeight:'700',fontSize:'0.875rem',marginBottom:'0.25rem',marginTop:0}}>ğŸ”“ New Revenue Streams Unlocked â€” Worked Example</p>
                  <p style={{color:'#fbcfe8',fontSize:'0.75rem',marginBottom:'0.75rem'}}>For each Partner you recruit and support to their QD* Fast Starter Bonus:</p>
                  <div style={{background:'rgba(255,255,255,0.15)',borderRadius:'0.5rem',padding:'0.75rem',marginBottom:'0.75rem'}}>
                    <div style={{display:'flex',justifyContent:'space-between',color:'white',fontSize:'0.875rem',marginBottom:'0.25rem'}}><span>They earn (just like you, above)</span><span style={{fontWeight:'700'}}>Â£{grandTotal.toLocaleString()}</span></div>
                    <div style={{borderTop:'1px solid rgba(255,255,255,0.3)',paddingTop:'0.25rem',display:'flex',justifyContent:'space-between',fontSize:'0.875rem'}}><span style={{color:'#fbcfe8'}}>You earn (in this example)</span><span style={{fontWeight:'700',color:'#fde68a'}}>Â£{partnerTotalEarnings.toLocaleString()}</span></div>
                  </div>
                  <p style={{color:'white',fontSize:'0.75rem',fontWeight:'600',marginBottom:'0.25rem'}}>Made up of:</p>
                  {[{icon:'ğŸ¤',label:'Supporting Customer Bonuses',val:supportingBonus},{icon:'ğŸ“',label:'Mentor Bonus',val:100},{icon:null,label:'Fast Starter Mentor Bonus',val:300}].map(r=>(
                    <div key={r.label} style={{display:'flex',justifyContent:'space-between',alignItems:'center',fontSize:'0.875rem',background:'rgba(255,255,255,0.1)',borderRadius:'0.25rem',padding:'0.25rem 0.5rem',marginBottom:'0.25rem'}}>
                      <span style={{display:'flex',alignItems:'center',color:'#fbcfe8'}}>{r.icon?<span style={{marginRight:'0.375rem'}}>{r.icon}</span>:<span style={{display:'inline-flex',alignItems:'center',marginRight:'0.375rem'}}><TrendingUp style={{...XS,color:'#fbcfe8'}}/></span>}{'  '}{r.label}</span>
                      <span style={{color:'white',fontWeight:'700'}}>Â£{r.val.toLocaleString()}</span>
                    </div>
                  ))}
                  <p style={{fontSize:'0.75rem',color:'#fbcfe8',fontStyle:'italic',textAlign:'center',marginTop:'0.5rem',marginBottom:0}}>Tap to flip back</p>
                </div>
              )}
            </div>
            {showPostFSBCTA&&<PostFastStartCTA/>}
          </div>
        </div>
        <div style={{marginTop:'1rem'}}>
          <button onClick={()=>setShowResetConfirm(true)} style={{width:'100%',padding:'0.75rem',background:'#e5e7eb',border:'none',borderRadius:'0.5rem',fontWeight:'600',color:'#374151',cursor:'pointer',fontSize:'1rem'}}>Reset Tracker</button>
        </div>
      </div>
      {showInfoPopup&&<HowPaidPopup onClose={()=>setShowInfoPopup(false)}/>}
      {selectedCircle!==null&&(
        <div style={{position:'fixed',inset:0,background:'rgba(0,0,0,0.3)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:50,padding:'1rem'}} onClick={()=>setSelectedCircle(null)}>
          <div className="animate-slideDown" style={{background:'white',borderRadius:'0.75rem',padding:'1.5rem',boxShadow:'0 20px 50px rgba(0,0,0,0.3)',maxWidth:'24rem',width:'100%'}} onClick={e=>e.stopPropagation()}>
            <p style={{fontSize:'0.875rem',fontWeight:'600',color:'#111827',marginBottom:'1rem',textAlign:'center'}}>{includeYou?`Customer ${selectedCircle}`:`Customer ${selectedCircle+1}`}: Homeowner with how many services?</p>
            <div style={{display:'grid',gridTemplateColumns:'repeat(4,1fr)',gap:'0.5rem',marginBottom:'0.75rem'}}>
              {[1,2,3,4].map(num=>{const cb=[50,100,250,300][num-1];const active=customers[selectedCircle]&&customers[selectedCircle].type==='homeowner'&&customers[selectedCircle].services===num;return(
                <button key={num} onClick={()=>setCustomerType('homeowner',num)} style={{padding:'1rem 0.5rem',border:`2px solid ${active?'#7c3aed':'#c4b5fd'}`,borderRadius:'0.5rem',background:active?'#7c3aed':'#f5f3ff',color:active?'white':'#6d28d9',cursor:'pointer',fontWeight:'600'}}>
                  <div style={{fontSize:'1rem',fontWeight:'700'}}>{num}</div><div style={{fontSize:'0.75rem',marginTop:'0.25rem'}}>(Â£{cb})</div>
                </button>);})}</div>
            <p style={{textAlign:'center',fontSize:'0.875rem',color:'#6b7280',marginBottom:'0.75rem'}}>or</p>
            <button onClick={()=>setCustomerType('renting')} style={{width:'100%',padding:'0.75rem',border:`2px solid ${customers[selectedCircle]&&customers[selectedCircle].type==='renting'?'#2563eb':'#93c5fd'}`,borderRadius:'0.5rem',background:customers[selectedCircle]&&customers[selectedCircle].type==='renting'?'#2563eb':'#eff6ff',color:customers[selectedCircle]&&customers[selectedCircle].type==='renting'?'white':'#1d4ed8',cursor:'pointer',fontWeight:'600',marginBottom:'0.75rem'}}>
              <div style={{fontSize:'1rem',fontWeight:'700'}}>Tenant/Renting</div><div style={{fontSize:'0.75rem',fontWeight:'400'}}>(No customer bonus, just recurring income)</div>
            </button>
            {customers[selectedCircle]&&customers[selectedCircle].type!==null&&(
              <button onClick={removeCustomer} style={{width:'100%',padding:'0.75rem',border:'2px solid #fca5a5',borderRadius:'0.5rem',background:'#fef2f2',color:'#b91c1c',cursor:'pointer',fontWeight:'600'}}>Remove Customer</button>
            )}
          </div>
        </div>
      )}
      {showResetConfirm&&(
        <div style={{position:'fixed',inset:0,background:'rgba(0,0,0,0.3)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:50,padding:'1rem'}}>
          <div className="animate-slideDown" style={{background:'white',borderRadius:'0.75rem',padding:'1.5rem',boxShadow:'0 20px 50px rgba(0,0,0,0.3)',maxWidth:'24rem',width:'100%'}}>
            <p style={{fontSize:'1.125rem',fontWeight:'600',color:'#111827',marginBottom:'1rem',textAlign:'center'}}>Are you sure?</p>
            <p style={{fontSize:'0.875rem',color:'#6b7280',marginBottom:'1.5rem',textAlign:'center'}}>This will reset all customer data and cannot be undone.</p>
            <div style={{display:'flex',gap:'0.75rem'}}>
              <button onClick={()=>setShowResetConfirm(false)} style={{flex:1,padding:'0.5rem',background:'#e5e7eb',border:'none',borderRadius:'0.5rem',fontWeight:'600',color:'#374151',cursor:'pointer'}}>No</button>
              <button onClick={resetTracking} style={{flex:1,padding:'0.5rem',background:'#ef4444',border:'none',borderRadius:'0.5rem',fontWeight:'600',color:'white',cursor:'pointer'}}>Yes, Reset</button>
            </div>
          </div>
        </div>
      )}
      {showCelebration&&(
        <div style={{position:'fixed',inset:0,background:'rgba(0,0,0,0.5)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:40,padding:'1rem'}}>
          <div className="animate-bounceOnce" style={{background:'white',borderRadius:'1rem',padding:'2rem',maxWidth:'28rem',textAlign:'center'}}>
            <div style={{fontSize:'3.75rem',marginBottom:'1rem'}}>ğŸ‰</div>
            <h2 style={{fontSize:'1.875rem',fontWeight:'700',color:'#7c3aed',marginBottom:'1rem'}}>Congratulations!</h2>
            <p style={{fontSize:'1.25rem',color:'#374151',marginBottom:'0.5rem'}}>You've qualified for the</p>
            <p style={{fontSize:'2.25rem',fontWeight:'700',color:'#16a34a',marginBottom:'1rem'}}>Â£500 Fast Starter Bonus!</p>
          </div>
        </div>
      )}
    </div>
  );
};

const root=ReactDOM.createRoot(document.getElementById('root'));
root.render(React.createElement(UWTracker));
</script>
</body>
</html>
