<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>UW Partner Quiz</title>

  <!-- Tailwind (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React 18 (UMD) + Babel for in-browser JSX -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>

<body class="bg-slate-50">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useRef } = React;

    // Minimal inline SVG icon components (replacing lucide-react imports)
    const Icon = ({ children, className }) => (
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} aria-hidden="true">
        {children}
      </svg>
    );

    const CheckCircleIcon = (props) => (
      <Icon {...props}>
        <circle cx="12" cy="12" r="10" />
        <path d="M9 12l2 2 4-4" />
      </Icon>
    );

    const XCircleIcon = (props) => (
      <Icon {...props}>
        <circle cx="12" cy="12" r="10" />
        <path d="M15 9l-6 6" />
        <path d="M9 9l6 6" />
      </Icon>
    );

    const UWPETQuizOnly = () => {
      // Quiz state
  const [currentQuestion, setCurrentQuestion] = useState(0);
  const [answers, setAnswers] = useState([]);
  const [showResults, setShowResults] = useState(false);
  const [showFeedback, setShowFeedback] = useState(false);
  const [selectedAnswer, setSelectedAnswer] = useState(null);
  const [feedbackResponses, setFeedbackResponses] = useState({
    clarity: null,
    usedInfo: null,
    fastStartLikelihood: null
  });

      const questions = [
    {
      id: 1,
      question: "You introduce 3 homeowners, each taking 4 services. What do you earn and what bonus do you unlock?",
      options: [
        "Customer Bonus only",
        "Customer Bonus + unlock High Activity Bonus",
        "Customer Bonus + unlock Fast Start Bonus",
        "All three bonuses"
      ],
      correct: 1,
      explanation: (
        <div className="space-y-3">
          <p className="font-semibold">Scenario: 3 homeowners taking 4 services each</p>
          <div className="bg-gray-50 p-3 rounded space-y-1">
            <div>â€¢ Customer Bonus: 3 Ã— Â£300 = Â£900</div>
            <div>â€¢ High Activity Bonus: 3 Ã— Â£50 = Â£150</div>
            <div className="pt-2 border-t border-gray-300 font-bold">â€¢ Total: Â£1,050</div>
          </div>
          <div className="bg-blue-50 p-3 rounded border-l-4 border-blue-500">
            <p className="font-semibold text-blue-900 mb-2">ğŸ’¡ "Just one more" insight:</p>
            <p className="text-sm text-blue-800 mb-3">Just adding one multi-service homeowner steps up High Activity Bonus from Â£50 to Â£100:</p>
            
            <div className="bg-white p-3 rounded space-y-1 text-sm mb-2">
              <div>â€¢ Customer Bonus: 4 Ã— Â£250 = Â£1,000</div>
              <div>â€¢ High Activity Bonus: 4 Ã— Â£100 = Â£400</div>
              <div className="pt-2 border-t border-gray-300 font-bold">â€¢ Total: Â£1,400</div>
            </div>
            
            <div className="bg-green-50 p-2 rounded border border-green-300 text-sm">
              <div className="font-bold text-green-900 mb-1">Difference: Â£1,400 - Â£1,050 = Â£350</div>
              <div className="text-green-800">
                <div>â€¢ Customer Bonus: Â£250 for the 4th customer</div>
                <div>â€¢ High Activity Bonus: steps up from Â£50 to Â£100, so instead of 3 Ã— Â£50 you earn 4 Ã— Â£100 = Â£400</div>
              </div>
            </div>
            
            <p className="text-sm text-blue-900 font-semibold mt-2">That 4th customer adds Â£500 to your earnings!</p>
          </div>
        </div>
      ),
      concept: "High Activity Bonus"
    },
    {
      id: 2,
      question: "To qualify for the Â£500 Fast Start Bonus, you need:",
      options: [
        "5 homeowners with 3+ services each",
        "5 customers (any type) + 1 partner",
        "5 homeowners + 1 partner",
        "Any 5 customers"
      ],
      correct: 1,
      explanation: (
        <div className="space-y-3">
          <p>Fast Start requires <strong>ALL 5 customer circles filled</strong> (any mix of homeowners/tenants) <strong>AND</strong> at least one of them upgraded to Partner status within 30 days of recruiting them.</p>
          <div className="bg-amber-50 p-3 rounded border-l-4 border-amber-500">
            <p className="text-sm text-amber-900"><strong>Note:</strong> The Â£500 Fast Start Bonus requires recruiting a partner and introducing 5 customers within 30 days. If achieved outside 30 days, you still earn Â£200 Promotion Bonus.</p>
          </div>
        </div>
      ),
      concept: "Fast Start Requirements"
    },
    {
      id: 3,
      question: "A customer who rents provides:",
      options: [
        "Â£50 upfront Customer Bonus",
        "No upfront bonus, just ongoing monthly income",
        "Â£100 Customer Bonus + recurring income",
        "Only High Activity Bonus"
      ],
      correct: 1,
      explanation: (
        <div className="space-y-3">
          <p>Tenants don't provide upfront Customer Bonus, but they <strong>DO</strong> provide recurring monthly income - a percentage profit share of their bill.</p>
          <p className="text-sm text-gray-700">UW call this <strong>Personal Residual Income (PRI)</strong>.</p>
        </div>
      ),
      concept: "Recurring Income"
    },
    {
      id: 4,
      question: "What's the Customer Bonus for a homeowner taking 3 services?",
      options: [
        "Â£50",
        "Â£100",
        "Â£250",
        "Â£300"
      ],
      correct: 2,
      explanation: (
        <div className="space-y-3">
          <p>A homeowner with 3 services earns you <strong>Â£250</strong>.</p>
          <div className="bg-gray-50 p-3 rounded">
            <p className="font-semibold mb-2">See how much Customer Bonus can be earned per number of services:</p>
            <div className="space-y-1">
              <div>â€¢ 1 service = Â£50</div>
              <div>â€¢ 2 services = Â£100</div>
              <div>â€¢ 3 services = Â£250</div>
              <div>â€¢ 4 services = Â£300</div>
            </div>
          </div>
        </div>
      ),
      concept: "Customer Bonus"
    },
    {
      id: 5,
      question: "You introduce 4 homeowners with 3 services each. What's the High Activity Bonus?",
      options: [
        "Â£0 - not enough customers",
        "Â£50 per customer (Â£200 total)",
        "Â£100 per customer (Â£400 total)",
        "Â£500"
      ],
      correct: 2,
      explanation: (
        <div className="space-y-3">
          <p>With <strong>4+ homeowners</strong> taking <strong>3+ services</strong> in a calendar month, you earn <strong>Â£100 per customer</strong> in High Activity Bonus = <strong>Â£400 total</strong>.</p>
          <div className="bg-gray-50 p-3 rounded">
            <p className="font-semibold mb-2">The breakdown:</p>
            <div className="space-y-1">
              <div>â€¢ 2-3 customers = Â£50 each</div>
              <div>â€¢ 4+ customers = Â£100 each</div>
            </div>
          </div>
        </div>
      ),
      concept: "High Activity Bonus"
    },
    {
      id: 6,
      question: "What happens when you support a partner to achieve their Fast Start?",
      options: [
        "You get Â£500",
        "You get half their Customer Bonus + Â£400",
        "You get their full earnings",
        "Nothing - only they benefit"
      ],
      correct: 1,
      explanation: (
        <div className="space-y-3">
          <p>When they achieve QDâ˜… inside their first 30 days they achieve their own Fast Start Bonus. When you support them on appointments, you earn <strong>Supporting Bonuses</strong> (50% of their Customer Bonus) + <strong>Fast Start Mentoring Bonuses</strong>.</p>
          
          <div className="bg-gray-50 p-3 rounded">
            <p className="font-semibold mb-2">Worked example:</p>
            <p className="text-sm mb-2">The partner is their own CUSTOMER and introduces:</p>
            <div className="text-sm space-y-1 mb-2">
              <div>â€¢ 2 Ã— three service homeowners, Â£250 CB each</div>
              <div>â€¢ 3 Ã— renting customers</div>
              <div>â€¢ 1 Ã— customer upgrades to Partner</div>
            </div>
            
            <div className="bg-white p-2 rounded mb-2">
              <p className="text-sm font-semibold mb-1">They earn:</p>
              <div className="text-sm space-y-0.5">
                <div>â€¢ Â£500 CB + Â£100 HAB + Â£500 FSB = <span className="font-bold">Â£1,100</span></div>
              </div>
            </div>
            
            <div className="bg-white p-2 rounded">
              <p className="text-sm font-semibold mb-1">You earn:</p>
              <div className="text-sm space-y-0.5">
                <div>â€¢ Â£250 SB + Â£400 Bonus = <span className="font-bold">Â£650</span></div>
              </div>
            </div>
            
            <p className="text-xs text-gray-600 italic mt-2">(This is on TOP of any earnings from introducing your own customers)</p>
          </div>

          <div className="bg-blue-50 p-3 rounded border-l-4 border-blue-500">
            <p className="text-sm text-blue-900 font-semibold mb-2">The Â£400 Fast Start Mentoring Bonuses breakdown:</p>
            <div className="text-sm text-blue-800 space-y-1">
              <div>â€¢ Â£100 Mentoring Bonus</div>
              <div>â€¢ Â£300 Fast Start Bonus</div>
            </div>
            <p className="text-sm text-blue-900 mt-2">Even when a partner achieves QDâ˜… outside their first 30 days, they achieve Â£200 Promotion Bonus and you earn Â£100 Mentoring Bonus.</p>
          </div>
        </div>
      ),
      concept: "Supporting & Mentoring"
    }
  ];

      const handleAnswer = (answerIndex) => {
    setSelectedAnswer(answerIndex);
    setShowFeedback(true);
    
    const isCorrect = answerIndex === questions[currentQuestion].correct;
    const newAnswers = [...answers, {
      questionId: questions[currentQuestion].id,
      correct: isCorrect,
      concept: questions[currentQuestion].concept
    }];
    setAnswers(newAnswers);
  };

  const handleNext = () => {
    setShowFeedback(false);
    setSelectedAnswer(null);
    
    if (currentQuestion < questions.length - 1) {
      setCurrentQuestion(currentQuestion + 1);
    } else {
      setShowResults(true);
    }
  };

  const restartQuiz = () => {
    setCurrentQuestion(0);
    setAnswers([]);
    setShowResults(false);
    setShowFeedback(false);
    setSelectedAnswer(null);
    setFeedbackResponses({
      clarity: null,
      usedInfo: null,
      fastStartLikelihood: null
    });
  };

  const calculateScore = () => {
    const correct = answers.filter(a => a.correct).length;
    return Math.round((correct / questions.length) * 100);
  };

  const getConceptScores = () => {
    const concepts = {};
    answers.forEach(answer => {
      if (!concepts[answer.concept]) {
        concepts[answer.concept] = { correct: 0, total: 0 };
      }
      concepts[answer.concept].total++;
      if (answer.correct) concepts[answer.concept].correct++;
    });
    return concepts;
  };

  const getScoreMessage = (score) => {
    if (score >= 90) return { emoji: "ğŸ†", message: "Outstanding!", color: "text-yellow-600" };
    if (score >= 75) return { emoji: "ğŸŒŸ", message: "Great job!", color: "text-green-600" };
    if (score >= 60) return { emoji: "ğŸ‘", message: "Good effort!", color: "text-blue-600" };
    return { emoji: "ğŸ“š", message: "Keep learning!", color: "text-purple-600" };
  };

      const renderQuiz = () => {
    if (showResults) {
      const score = calculateScore();
      const scoreData = getScoreMessage(score);
      const conceptScores = getConceptScores();

      return (
        <div className="bg-white rounded-2xl shadow-lg p-6 md:p-8">
          <div className="text-center mb-6">
            <div className="text-6xl mb-4">{scoreData.emoji}</div>
            <h2 className={`text-3xl font-bold ${scoreData.color} mb-2`}>{scoreData.message}</h2>
            <p className="text-5xl font-bold text-gray-800 mb-2">{score}%</p>
            <p className="text-gray-600">You got {answers.filter(a => a.correct).length} out of {questions.length} questions correct</p>
          </div>

          <div className="mb-6 p-4 bg-gray-50 rounded-lg">
            <h3 className="font-bold text-gray-800 mb-3">Concept Breakdown</h3>
            <div className="space-y-2">
              {Object.entries(conceptScores).map(([concept, data]) => (
                <div key={concept} className="flex justify-between items-center">
                  <span className="text-sm text-gray-700">{concept}</span>
                  <span className={`text-sm font-semibold ${data.correct === data.total ? 'text-green-600' : 'text-orange-600'}`}>
                    {data.correct}/{data.total}
                  </span>
                </div>
              ))}
            </div>
          </div>

          <div className="mb-6 p-4 bg-blue-50 rounded-lg border-2 border-blue-200">
            <h3 className="font-bold text-blue-900 mb-3">Quick Feedback</h3>
            
            <div className="mb-4">
              <p className="text-sm text-blue-800 mb-2">How clear was the tool?</p>
              <div className="flex gap-2 justify-center">
                {['ğŸ˜•', 'ğŸ˜', 'ğŸ™‚', 'ğŸ˜Š', 'ğŸ¤©'].map((emoji, i) => (
                  <button
                    key={i}
                    onClick={() => setFeedbackResponses({...feedbackResponses, clarity: i + 1})}
                    className={`text-3xl p-2 rounded-lg transition-all ${feedbackResponses.clarity === i + 1 ? 'bg-blue-200 scale-110' : 'hover:bg-blue-100'}`}
                  >
                    {emoji}
                  </button>
                ))}
              </div>
            </div>

            <div className="mb-4">
              <p className="text-sm text-blue-800 mb-2">Did you use the info (â„¹ï¸) popup?</p>
              <div className="flex gap-3 justify-center">
                <button
                  onClick={() => setFeedbackResponses({...feedbackResponses, usedInfo: true})}
                  className={`px-6 py-2 rounded-lg font-semibold transition-all ${feedbackResponses.usedInfo === true ? 'bg-blue-600 text-white' : 'bg-blue-100 text-blue-700 hover:bg-blue-200'}`}
                >
                  Yes
                </button>
                <button
                  onClick={() => setFeedbackResponses({...feedbackResponses, usedInfo: false})}
                  className={`px-6 py-2 rounded-lg font-semibold transition-all ${feedbackResponses.usedInfo === false ? 'bg-blue-600 text-white' : 'bg-blue-100 text-blue-700 hover:bg-blue-200'}`}
                >
                  No
                </button>
              </div>
            </div>

            <div>
              <p className="text-sm text-blue-800 mb-2">How likely are you to aim for Fast Start? (0-10)</p>
              <div className="flex gap-1 justify-center flex-wrap">
                {[0,1,2,3,4,5,6,7,8,9,10].map(num => (
                  <button
                    key={num}
                    onClick={() => setFeedbackResponses({...feedbackResponses, fastStartLikelihood: num})}
                    className={`w-10 h-10 rounded-lg font-bold transition-all ${feedbackResponses.fastStartLikelihood === num ? 'bg-blue-600 text-white scale-110' : 'bg-blue-100 text-blue-700 hover:bg-blue-200'}`}
                  >
                    {num}
                  </button>
                ))}
              </div>
            </div>
          </div>

          <button
            onClick={restartQuiz}
            className="w-full py-3 bg-purple-600 hover:bg-purple-700 text-white font-bold rounded-lg transition-colors"
          >
            Retake Quiz
          </button>
        </div>
      );
    }

    const currentQ = questions[currentQuestion];
    const isCorrect = selectedAnswer === currentQ.correct;

    return (
      <div className="bg-white rounded-2xl shadow-lg p-6 md:p-8">
        <div className="mb-6">
          <div className="flex justify-between items-center mb-4">
            <span className="text-sm font-semibold text-purple-600">Question {currentQuestion + 1} of {questions.length}</span>
            <span className="text-sm text-gray-500">{currentQ.concept}</span>
          </div>
          <div className="w-full bg-gray-200 rounded-full h-2 mb-4">
            <div
              className="bg-purple-600 h-2 rounded-full transition-all duration-300"
              style={{ width: `${((currentQuestion + 1) / questions.length) * 100}%` }}
            ></div>
          </div>
        </div>

        <h3 className="text-xl font-bold text-gray-800 mb-6">{currentQ.question}</h3>

        <div className="space-y-3 mb-6">
          {currentQ.options.map((option, index) => (
            <button
              key={index}
              onClick={() => !showFeedback && handleAnswer(index)}
              disabled={showFeedback}
              className={`w-full p-4 text-left rounded-lg border-2 font-medium transition-all ${
                showFeedback
                  ? index === currentQ.correct
                    ? 'bg-green-50 border-green-500 text-green-900'
                    : index === selectedAnswer
                    ? 'bg-red-50 border-red-500 text-red-900'
                    : 'bg-gray-50 border-gray-300 text-gray-500'
                  : 'bg-white border-gray-300 hover:border-purple-400 hover:bg-purple-50 text-gray-800'
              }`}
            >
              <div className="flex items-center justify-between">
                <span>{option}</span>
                {showFeedback && index === currentQ.correct && <CheckCircle className="w-5 h-5 text-green-600" />}
                {showFeedback && index === selectedAnswer && index !== currentQ.correct && <XCircle className="w-5 h-5 text-red-600" />}
              </div>
            </button>
          ))}
        </div>

        {showFeedback && (
          <div className={`p-4 rounded-lg mb-6 animate-slideDown ${isCorrect ? 'bg-green-50 border-2 border-green-300' : 'bg-orange-50 border-2 border-orange-300'}`}>
            <div className="flex items-start gap-2 mb-3">
              {isCorrect ? (
                <CheckCircle className="w-6 h-6 text-green-600 flex-shrink-0 mt-1" />
              ) : (
                <Info className="w-6 h-6 text-orange-600 flex-shrink-0 mt-1" />
              )}
              <div>
                <p className={`font-bold mb-2 ${isCorrect ? 'text-green-900' : 'text-orange-900'}`}>
                  {isCorrect ? 'Correct!' : 'Not quite - here\'s why:'}
                </p>
                <div className={`text-sm ${isCorrect ? 'text-green-800' : 'text-orange-800'}`}>
                  {currentQ.explanation}
                </div>
              </div>
            </div>
            {!isCorrect && (
              <p className="text-sm text-orange-700 italic mt-3">ğŸ’¡ Not sure? Try it in the Earnings Tool!</p>
            )}
          </div>
        )}

        {showFeedback && (
          <button
            onClick={handleNext}
            className="w-full py-3 bg-purple-600 hover:bg-purple-700 text-white font-bold rounded-lg transition-colors"
          >
            {currentQuestion < questions.length - 1 ? 'Next Question' : 'See Results'}
          </button>
        )}
      </div>
    );
  };

      return (
        <div className="min-h-screen bg-gradient-to-br from-pink-50 to-purple-50 p-4 md:p-8">
          <div className="max-w-2xl mx-auto">
            <div className="flex items-center justify-between mb-4">
              <a href="./index.html" className="text-sm font-semibold text-purple-700 hover:text-purple-900 underline">â† Back to Earnings Tool</a>
              <div className="text-xs text-gray-500">Quiz</div>
            </div>

            {renderQuiz()}
          </div>

          <style>{`
            @keyframes slideDown {
              0% { opacity: 0; transform: scale(0.95); }
              100% { opacity: 1; transform: scale(1); }
            }
            @keyframes fadeIn {
              from { opacity: 0; }
              to { opacity: 1; }
            }
            .animate-slideDown { animation: slideDown 0.2s ease-out forwards; }
            .animate-fadeIn { animation: fadeIn 0.2s ease-in; }
          `}</style>
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<UWPETQuizOnly />);
  </script>
</body>
</html>
